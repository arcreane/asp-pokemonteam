@model List<Pokemon>

@{
    ViewData["Title"] = "Sélection de ton équipe";
    Layout = "~/Views/Shared/_Layout.cshtml"; // Change si tu n’utilises pas _Layout
}

<h2>Sélectionne ton équipe de 6 Pokémon</h2>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<form method="post" asp-action="ConfirmTeam">
    <div class="row">
        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">@Model[i].Name</h5>
                        <ul>
                            <li><strong>PV :</strong> @Model[i].HealthPoint</li>
                            <li><strong>Force :</strong> @Model[i].Strength</li>
                            <li><strong>Vitesse :</strong> @Model[i].Speed</li>
                        </ul>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="selectedPokemonIds" value="@Model[i].Id" id="poke@i" />
                            <label class="form-check-label" for="poke@i">
                                Sélectionner
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary">Valider mon équipe</button>
    </div>
</form>

@section Scripts {
    <script>
        // Limite la sélection à 6 pokémon maximum
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const checked = document.querySelectorAll('input[type="checkbox"]:checked');
                if (checked.length > 6) {
                    cb.checked = false;
                    alert("Tu ne peux choisir que 6 Pokémon.");
                }
            });
        });
    </script>
}
