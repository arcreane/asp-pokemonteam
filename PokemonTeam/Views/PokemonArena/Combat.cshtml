@{
    ViewData["Title"] = "Combat Pokémon";
    Layout = "_GameLayout";
}

<div class="combat-arena">
    <h2 class="text-center mb-4">
        <i class="fas fa-fire"></i> ARÈNE DE COMBAT <i class="fas fa-bolt"></i>
    </h2>
    
    <div class="row">
        <!-- Pokémon Joueur -->
        <div class="col-md-5">
            <div class="pokemon-card player">
                <h4 id="player-pokemon-name">Chargement...</h4>
                <img id="player-pokemon-sprite" src="" alt="Votre Pokémon" class="pokemon-sprite">
                
                <div class="health-bar">
                    <div id="player-health-fill" class="health-fill" style="width: 100%"></div>
                </div>
                <div class="text-center">
                    <span id="player-health-text">100/100 HP</span>
                </div>
                
                <div class="mt-3">
                    <div class="row">
                        <div class="col-6">
                            <small>ATK: <span id="player-attack">???</span></small>
                        </div>
                        <div class="col-6">
                            <small>DEF: <span id="player-defense">???</span></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Zone Combat -->
        <div class="col-md-2 text-center d-flex align-items-center justify-content-center">
            <div>
                <i class="fas fa-lightning-bolt fa-3x text-warning pulse"></i>
                <p class="mt-2">VS</p>
                <button id="new-battle-btn" class="btn btn-light btn-sm">
                    <i class="fas fa-redo"></i> Nouveau Combat
                </button>
            </div>
        </div>
        
        <!-- Pokémon Ennemi -->
        <div class="col-md-5">
            <div class="pokemon-card enemy">
                <h4 id="enemy-pokemon-name">???</h4>
                <img id="enemy-pokemon-sprite" src="" alt="Pokémon Ennemi" class="pokemon-sprite">
                
                <div class="health-bar">
                    <div id="enemy-health-fill" class="health-fill" style="width: 100%"></div>
                </div>
                <div class="text-center">
                    <span id="enemy-health-text">???/??? HP</span>
                </div>
                
                <div class="mt-3">
                    <div class="row">
                        <div class="col-6">
                            <small>ATK: <span id="enemy-attack">???</span></small>
                        </div>
                        <div class="col-6">
                            <small>DEF: <span id="enemy-defense">???</span></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <!-- Actions de Combat -->
    <div class="col-md-8">
        <div class="game-panel">
            <h4><i class="fas fa-magic"></i> Actions de Combat</h4>
            
            <div id="combat-actions">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Attaques :</h6>
                        <!-- Les boutons seront générés dynamiquement -->
                        <div id="skill-buttons">
                            <div class="text-center text-muted">
                                <i class="fas fa-spinner fa-spin"></i> Chargement des attaques...
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <h6>Objets :</h6>
                        <div id="item-buttons">
                            <button class="btn btn-success mb-2" onclick="usePotion()">
                                <i class="fas fa-heart"></i> Potion
                            </button>
                            <button class="btn btn-info mb-2" onclick="showItems()">
                                <i class="fas fa-backpack"></i> Inventaire
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="mt-3">
                    <button id="run-btn" class="btn btn-warning">
                        <i class="fas fa-running"></i> Fuir
                    </button>
                </div>
            </div>
            
            <div id="battle-over" style="display: none;" class="text-center">
                <h4 id="battle-result">Combat Terminé</h4>
                <div id="rewards" class="mt-3"></div>
                <button id="continue-btn" class="btn btn-primary mt-3">
                    <i class="fas fa-play"></i> Continuer
                </button>
            </div>
        </div>
    </div>
    
    <!-- Log de Combat -->
    <div class="col-md-4">
        <div class="game-panel">
            <h4><i class="fas fa-scroll"></i> Journal de Combat</h4>
            <div id="combat-log" class="combat-log">
                Préparez-vous au combat !
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/combat.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initializeCombat();
        });
    </script>
}